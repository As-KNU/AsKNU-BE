services:
  # FastAPI Web Service
  - type: web
    name: asknu-backend
    runtime: python
    region: singapore  # 또는 oregon (한국과 가장 가까운 리전)
    plan: free  # 무료 플랜
    buildCommand: pip install -r requirements.txt
    startCommand: uvicorn main:app --host 0.0.0.0 --port $PORT
    envVars:
      - key: PYTHON_VERSION
        value: 3.11
      - key: DATABASE_URL
        sync: false  # Render 대시보드에서 수동으로 설정
      - key: UPSTAGE_API_KEY
        sync: false  # Render 대시보드에서 수동으로 설정
      - key: UPSTAGE_MODEL
        value: solar-pro
      - key: BASE_BOARD
        value: https://cse.knu.ac.kr/bbs/board.php?bo_table=sub5_1&lang=kor
    healthCheckPath: /health
    autoDeploy: true  # main 브랜치 푸시시 자동 배포
